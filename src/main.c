// Processor Frequency 8MHz
#define F_CPU 8000000UL

// Processor type to include appropriate i/o header
// #define __AVR_ATmega8__
#include <avr/io.h>
#include <util/delay.h>

#include "addrs.h"

int main(void) {
	DDRD |= 0xFF;

	unsigned char v[4][10] = {
		{0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09},
		{0x06, 0x07, 0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F},
		{0x00, 0x0F, 0x01, 0x0E, 0x02, 0x0D, 0x03, 0x0C, 0x04, 0x0B},
		{0x01, 0x0A, 0x05, 0x0D, 0x06, 0x09, 0x08, 0x0E, 0x00, 0x05},
	};
	
	while (1) {
		unsigned char i, j = 0;
		for (i = 0; i < 10; i++) {
			for (j = 0; j < 4; j++) {
				PORTD |= 1 << PD7; // Disable Selector
				PORTD = (j * 16) | v[j][i]; // PUT v[j][i] on Data, Device j
			}

			_delay_ms(100);
		}
	}

	return 0;
}
